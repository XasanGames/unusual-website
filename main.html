<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nine Circles — Wave-style (Geometry Dash)</title>
  <style>
    :root{--bg:#071027;--panel:#071326;--muted:#9aa4b2;--accent1:#00f0ff;--accent2:#ff6ec7}
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{margin:0;min-height:100vh;display:flex;gap:18px;background:linear-gradient(180deg,#020617 0%, #071027 100%);color:#e6eef8}
    .controls{width:420px;padding:18px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-right:1px solid rgba(255,255,255,0.03);overflow:auto}
    h1{font-size:18px;margin:0 0 12px}
    label{display:block;margin:8px 0 4px;color:var(--muted);font-size:13px}
    input[type=text], input[type=number], select{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    .row{display:flex;gap:8px}
    button{padding:8px 12px;border-radius:8px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#022;cursor:pointer}
    .small-btn{padding:6px 8px;font-size:13px}
    .canvas-wrap{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px}
    .stage{width:100%;max-width:900px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:12px;padding:12px;box-shadow:0 8px 30px rgba(2,6,23,0.7)}
    .help{font-size:13px;color:var(--muted);margin-top:8px}

    /* Wave-like background (diagonal stripes / chevrons) */
    .stage::before{
      content:'';position:absolute;pointer-events:none;inset:0;border-radius:12px;background-image:
        linear-gradient(135deg, rgba(255,255,255,0.02) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.02) 50%, rgba(255,255,255,0.02) 75%, transparent 75%, transparent);
      background-size:56px 56px;mix-blend-mode:overlay;opacity:0.6
    }

    /* SVG helpers */
    svg{display:block;width:100%;height:auto;border-radius:8px;background:radial-gradient(closest-side, rgba(0,0,0,0.12), transparent 60%)}

    /* Wave-style UI preview area */
    .preview-wrap{position:relative;padding:18px}

    /* Controls grid for circles */
    .circle-row{display:grid;grid-template-columns:1fr 88px 78px;gap:8px;align-items:center;margin-bottom:8px}
  </style>
</head>
<body>
  <div class="controls">
    <h1>Nine Circles — стиль «Wave» (Geometry Dash)</h1>
    <div class="muted">Этот пресет меняет визуал для части с волной: неоновый градиент, острый контур, свечения, и легкая анимация — всё как в wave-пассаже GD.</div>

    <label>Ширина холста (px)</label>
    <input id="canvasSize" type="number" value="1000" min="200">

    <label>Текст (каждое кольцо — новая строка, разделитель — `|`)</label>
    <input id="defaultText" type="text" value="NINE|CIRCLES|WAVE|STYLE|GEOMETRY|DASH|PRESET|GLITCH|NEON">

    <label>Градиент 1</label>
    <input id="g1" type="text" value="#00f0ff">
    <label>Градиент 2</label>
    <input id="g2" type="text" value="#ff6ec7">

    <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
      <button id="applyPreset">Применить стиль Wave</button>
      <button id="renderBtn" class="small-btn">Рендер</button>
    </div>

    <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)">

    <div class="help">Как это работает: текст располагается по концентрическим окружностям, но стиль заливки и обводки имитируют визуальный язык wave-прохождения: острые контуры, неон, мягкое свечение и скользящая маска.</div>
  </div>

  <div class="canvas-wrap">
    <div class="stage preview-wrap">
      <svg id="svg" viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <!-- gradient used for fills -->
          <linearGradient id="waveGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#00f0ff" />
            <stop offset="100%" stop-color="#ff6ec7" />
          </linearGradient>

          <!-- glow filter -->
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="6" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>

          <!-- clip path for animated sweep (to simulate moving wave light) -->
          <linearGradient id="sweep" x1="0" x2="1">
            <stop offset="0" stop-opacity="0.0" stop-color="#fff"/>
            <stop offset="0.5" stop-opacity="0.25" stop-color="#fff"/>
            <stop offset="1" stop-opacity="0.0" stop-color="#fff"/>
          </linearGradient>
        </defs>

        <!-- background chevrons / stripes to mimic wave track -->
        <g id="bg-stripes" transform="translate(0,0)">
          <rect width="1000" height="1000" fill="transparent"></rect>
          <!-- draw repeating chevrons using path pattern -->
          <g id="chevrons"></g>
        </g>

        <!-- group for rings/text -->
        <g id="rings" transform="translate(500,500)"></g>

        <!-- overlay for animated sweep -->
        <rect id="sweepRect" x="-500" y="-500" width="1000" height="1000" fill="url(#sweep)" opacity="0.12"></rect>

      </svg>
    </div>
  </div>

  <script>
    const maxRings = 9;
    const svg = document.getElementById('svg');
    const rings = document.getElementById('rings');
    const chevrons = document.getElementById('chevrons');
    const waveGrad = document.getElementById('waveGrad');

    const canvasSizeInput = document.getElementById('canvasSize');
    const defaultTextInput = document.getElementById('defaultText');
    const g1Input = document.getElementById('g1');
    const g2Input = document.getElementById('g2');
    const renderBtn = document.getElementById('renderBtn');
    const applyPreset = document.getElementById('applyPreset');

    function drawChevrons(){
      chevrons.innerHTML = '';
      const step = 44; // spacing of pattern
      const size = 20;
      for(let y=-600;y<800;y+=step){
        const g = document.createElementNS('http://www.w3.org/2000/svg','g');
        g.setAttribute('transform',`translate(-600,${y}) skewX(-30)`);
        for(let x=0;x<2200;x+=step){
          const p = document.createElementNS('http://www.w3.org/2000/svg','path');
          // simple chevron-ish shape
          const d = `M ${x} 0 l ${size} ${-size} l ${size} ${size} l ${size} ${-size} l ${size} ${size}`;
          p.setAttribute('d',d);
          p.setAttribute('stroke','rgba(255,255,255,0.02)');
          p.setAttribute('stroke-width','4');
          p.setAttribute('fill','none');
          chevrons.appendChild(p);
        }
      }
    }

    function makeRings(textLines, center=500){
      rings.innerHTML = '';
      const baseRadius = 120;
      const spacing = 44;
      for(let i=0;i<Math.min(textLines.length,maxRings);i++){
        const radius = baseRadius + i*spacing;
        const id = 'path'+i;
        // create circular path
        const path = document.createElementNS('http://www.w3.org/2000/svg','path');
        path.setAttribute('id', id);
        path.setAttribute('d', `M ${radius} 0 A ${radius} ${radius} 0 1 1 ${-radius} 0 A ${radius} ${radius} 0 1 1 ${radius} 0`);
        path.setAttribute('fill','none');
        path.setAttribute('opacity','0');
        rings.appendChild(path);

        // text along path
        const text = document.createElementNS('http://www.w3.org/2000/svg','text');
        text.setAttribute('font-family','Inter, Roboto, Arial');
        text.setAttribute('font-size', Math.max(18, 46 - i*2));
        text.setAttribute('letter-spacing',0);
        text.setAttribute('text-anchor','middle');

        // duplicated for stroke + fill layers
        const tspanFill = document.createElementNS('http://www.w3.org/2000/svg','textPath');
        tspanFill.setAttribute('href','#'+id);
        tspanFill.setAttribute('startOffset','50%');
        tspanFill.textContent = textLines[i];
        // fill style (gradient)
        tspanFill.setAttribute('fill','url(#waveGrad)');
        tspanFill.setAttribute('style','font-weight:800;filter:url(#glow)');

        const tspanStroke = document.createElementNS('http://www.w3.org/2000/svg','textPath');
        tspanStroke.setAttribute('href','#'+id);
        tspanStroke.setAttribute('startOffset','50%');
        tspanStroke.textContent = textLines[i];
        tspanStroke.setAttribute('fill','none');
        tspanStroke.setAttribute('stroke','#00101a');
        tspanStroke.setAttribute('stroke-width','6');
        tspanStroke.setAttribute('stroke-linejoin','round');

        // slight inner bright contour
        const tspanInner = document.createElementNS('http://www.w3.org/2000/svg','textPath');
        tspanInner.setAttribute('href','#'+id);
        tspanInner.setAttribute('startOffset','50%');
        tspanInner.textContent = textLines[i];
        tspanInner.setAttribute('fill','none');
        tspanInner.setAttribute('stroke','white');
        tspanInner.setAttribute('stroke-width','1');
        tspanInner.setAttribute('opacity','0.18');

        // assemble (stroke behind, fill on top)
        text.appendChild(tspanStroke);
        text.appendChild(tspanFill);
        text.appendChild(tspanInner);
        rings.appendChild(text);
      }
    }

    function applyColors(){
      const c1 = g1Input.value || '#00f0ff';
      const c2 = g2Input.value || '#ff6ec7';
      // update gradient stops
      const stops = waveGrad.querySelectorAll('stop');
      stops[0].setAttribute('stop-color', c1);
      stops[1].setAttribute('stop-color', c2);
    }

    function render(){
      drawChevrons();
      applyColors();
      const text = defaultTextInput.value.trim();
      const lines = text.split('|').map(s=>s.trim()).filter(Boolean);
      if(lines.length===0) lines.push('NINE CIRCLES');
      makeRings(lines);
      // animate sweep
      animateSweep();
    }

    // simple sweep animation (moves gradient mask horizontally)
    function animateSweep(){
      const sweep = document.getElementById('sweepRect');
      sweep.setAttribute('x',-500);
      sweep.removeAttribute('data-anim');
      const dur = 5000;
      const start = performance.now();
      function step(t){
        const p = ((t-start) % dur) / dur;
        const x = -500 + p*1500; // move across
        sweep.setAttribute('x', x);
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    renderBtn.addEventListener('click', render);
    applyPreset.addEventListener('click', ()=>{
      g1Input.value = '#00f0ff'; g2Input.value = '#ff6ec7';
      defaultTextInput.value = 'NINE|CIRCLES|WAVE|STYLE|GEOMETRY|DASH|PRESET|GLITCH|NEON';
      render();
    });

    // initial render
    render();
  </script>
</body>
</html>
